var mcmc=function(n,t){"use strict";var r,e,a,u=[-1,1],o=function(n){for(var r=function(n,t){return Math.floor(Math.random()*(t-n))+n},e=10,a=n.length,o=[],c=0;e>c;c++){var f=n[r(0,a)];o.push(t.sampleFunc(-1,1,function(n){return i(n,f[0],f[1],u)}))}return o},i=function(t,r,e,a){var u=a[0],o=a[1],i=(t-u)/(o-u);return n.beta.pdf(i,r,e)},c=function(t,o,c,f,l){var s=function(t,r){for(var e=t.length,a=0,i=50,c=[],f=t,l=[],s=[],h=0;e>h;h++)l[h]=0,s[h]=0;var m=function(n){var t=c.slice();M(n),c=t},p=function(t){return u[0]+n.beta.mean(t[0],t[1])*(u[1]-u[0])},v=function(){c.push(f.concat(p(f)));for(var t=0;e>t;t++){var u=n.normal.sample(f[t],Math.exp(l[t])),o=f.slice();o[t]=u;var h=Math.exp(r(o)-r(f));h>Math.random()&&(s[t]++,f=o)}if(c.length%i===0)for(a++,t=0;e>t;t++)s[t]/i>.44?l[t]+=Math.min(.01,1/Math.sqrt(a)):s[t]/i<.44&&(l[t]-=Math.min(.01,1/Math.sqrt(a))),s[t]=0;return f},M=function(n){for(var t=0;n-1>t;t++)v();return v()},_=!1,g=o,T=function(n,t){return g=n,n>0?(_=!0,M(t),setTimeout(function(){T(n-t,t)},0)):(_=!1,null)};return{chain:function(){return c},running_asynch:function(){return _},burn:m,n_samples:M,samples_left:function(){return g},n_samples_asynch:T}},h=function(t){return function(r){var e=r[0],a=r[1],o=0;o+=Math.log(n.exponential.pdf(e,1)),o+=Math.log(n.exponential.pdf(a,1));for(var c=0,f=t.length;f>c;c++)o+=Math.log(i(t[c],e,a,u));return o}},m=function(n){if(v.burn(500),n>0){var t=1-500*n/c;f(.45*t),r=setTimeout(function(){m(n-1)},0)}else e=v.n_samples_asynch(o,50),p()},p=function(){if(v.running_asynch()){var n=1-v.samples_left()/o;f(.45+.45*n),a=setTimeout(p,0)}else l(v.chain())};clearTimeout(r),clearTimeout(e),clearTimeout(a);var v=s([1,1],h(t));m(Math.ceil(c/500))};return{posterior_predictive_check:o,run_BEST:c}}(jStat,plot);