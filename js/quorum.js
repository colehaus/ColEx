var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_slicedToArray=function(){return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,o){var r=[],e=!0,n=!1,a=void 0;try{for(var i,l=t[Symbol.iterator]();!(e=(i=l.next()).done)&&(r.push(i.value),!o||r.length!==o);e=!0);}catch(t){n=!0,a=t}finally{try{!e&&l.return&&l.return()}finally{if(n)throw a}}return r}(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();!function(t,o,r,e,n){var a={font:{size:8},shadowSize:0,yaxis:{tickLength:5},xaxis:{tickLength:5},legend:{backgroundColor:"rgba(0, 0, 0, 0)",color:o.bodyText},grid:{backgroundColor:null,color:o.bodyText},colors:o.chroma.slice(1)},i=[-1,1],l=function(o,e,l){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=void 0,u=t.extend(!0,{},a),f=[];if(!0===l.log){var d={ticks:[0,.01,.1,1,10,100],transform:function(t){return Math.log(t+.001)},inverseTransform:function(t){return Math.exp(t)},tickDecimals:2};t.extend(u.xaxis,d),t.extend(u.yaxis,d)}var h=function(t){var o=_slicedToArray(t,2),r=o[0],e=o[1];return!0===l.log?{min:r/2,max:2*e}:{min:r,max:e}};if("object"===_typeof(l.xlims)&&null!==l.xlims&&t.extend(u.xaxis,h(l.xlims)),"object"===_typeof(l.ylims)&&null!==l.ylims&&t.extend(u.yaxis,h(l.ylims)),0!==s.length&&(s.forEach(function(t){f.push({data:t,color:"rgba(165, 170, 204, 0.7)"})}),f[0].label="Posterior Prediction"),0!==e.length){var m=(c=r.histogramCounts(e)).length>1?c[1][0]-c[0][0]:.05;f.push({data:c,bars:{show:!0,align:"center",barWidth:m},color:1})}var p,v,y;if("number"==typeof l.compValue){var g=(p=l.compValue,v=e,[1-(y=n.mean(n.map(v,function(t){return t>=p?1:0}))),y]);f.push({data:[[l.compValue,0],[l.compValue,1/0]],label:(100*g[0]).toPrecision(3)+"% < "+l.compValue+" < "+(100*g[1]).toPrecision(3)+"%",lines:{lineWidth:2},color:2})}if(void 0!==l.di&&null!==l.di){var b=function(t,o){var e=_slicedToArray(o,2),n=e[0],a=e[1];f.push({data:[[n,r.getHeight(n===i[0]?a:n,c)],[a,r.getHeight(a===i[1]?n:a,c)]],label:t.toPrecision(2).slice(2)+"% "+l.di+" ("+n.toPrecision(3)+", "+a.toPrecision(3)+")",lines:{lineWidth:5},color:3})};"BI"===l.di?[.95,.99].forEach(function(t){b(t,function(t,o){o=o.sort(function(t,o){return t-o});var r=Math.floor(o.length*t),e=[o[o.length-1-r],i[1]],n=[i[0],o[r]];return-e[0]<n[1]?e:n}(t,e))}):[.95].forEach(function(t){b(t,function(t,o){o=o.sort(function(t,o){return t-o});for(var r=Math.floor(o.length*t),e=[n.min(o),n.max(o)],a=e[0],i=e[1],l=0,s=o.length-r;l<s;l++)if(o[l+r]-o[l]<i-a){var c=[o[l],o[l+r]];a=c[0],i=c[1]}return[a,i]}(t,e))})}if(void 0!==e.length&&0!==e.length){var x=n.mean(e);f.push({data:[[x,0]],label:"Mean: "+x.toPrecision(3),points:{show:!0},color:4})}return t.plot(o,f,u)},s=function(o){var e=o.length,i=e-1;if(e<30)alert("We need at least 30 votes for this calculation. You need at least "+(30-e)+" more.");else{var l=n.mean(o),s=n.stdev(o),c=[{data:r.sampleFunc(-1,1,function(t){return n.studentt.pdf((l-t)/s*Math.sqrt(e),i)}),lines:{show:!0},color:1},{data:[[l,0]],label:"Mean: "+l.toPrecision(3),points:{show:!0},color:4}];[.95,.99].forEach(function(t){var o,r,a,u=(o=t,r=n.studentt.inv(o,i)*s/Math.sqrt(e),a=n.studentt.pdf(n.studentt.inv(o,i),i),l>0?[a,l-r,1/0]:[a,-1/0,l+r]),f=_slicedToArray(u,3),d=f[0],h=f[1],m=f[2];c.push({data:[[h,d],[m,d]],label:t.toPrecision(2).slice(2)+"% CI ("+h.toPrecision(3)+", "+m.toPrecision(3)+")",lines:{lineWidth:5},color:3})}),t("#stat-out").show(),t.plot(t("#freq > div"),c,a),t("progress").attr("value",1)}},c=function(o){var r=function(t){return t=t.replace(/[^-1234567890.]+$/,"").replace(/^[^-1234567890.]+/,""),n.map(t.split(/[^-1234567890.]+/),function(t){var o=parseFloat(t);if(isNaN(o))throw"NaN";return o<=0?.001:o>=1?.999:o})},e=void 0,a=void 0;try{e=r(t("#data1").val()),a=r(t("#data2").val())}catch(l){return alert("ERROR: Data not supplied for both groups or not formatted correctly."),null}var i=a.length-e.length;if(0!==i&&!0===o){var l=" Since we're supposed to pair data, that's bad.";return i>0?(alert("You have "+i+" more data points for Proposal 2 than for Proposal 1."+l),null):(alert("You have "+-i+" more data points for Proposal 1 than for Proposal 2."+l),null)}for(var s=[],c=Math.min(e.length,a.length),u=0;u<c;u++)s.push(a[u]-e[u]);return[e,a,s]},u=function(o){var e=c();if(void 0!==e){var n=r.yHistLims(e);l(t("#preview1 > div"),e[0],{xlims:[0,1],ylims:n}),l(t("#preview2 > div"),e[1],{xlims:[0,1],ylims:n}),l(t("#diff > div"),e[2],{xlims:[-1,1]},o)}};t(function(){t(".act > .analyze").click(function(){var o,n,a=c(!0);void 0!==a&&(t("#best").closest("li").hasClass("open")?(o=a[2],n=function(o){t("progress").attr("value",o)},t(".analyze").html("Re-analyze"),e.run_BEST(o,2e4,2e4,n,function(o){u(e.posterior_predictive_check(o)),n(.925),t("#stat-out").show(),l(t("#mean > div"),r.twoDArrayCol(o,2),{di:"BI",comp:0,xlims:[-1,1]}),n(.95);var a=r.twoDArrayCol(o,0),i=r.twoDArrayCol(o,1),s=r.xHistLims([a,i]),c=r.yHistLims([a,i]);l(t("#alpha > div"),a,{di:"HDI",xlims:s,ylims:c,log:!0}),n(.975),l(t("#beta > div"),i,{di:"HDI",xlims:s,ylims:c,log:!0}),n(1)})):s(a[2]))}),t(".preview").click(function(){u()}),setTimeout(function(){u()});var n={grid:{show:!1},colors:[o.value[3]]};t.plot(t("#non-norm"),[{bars:{show:!0},data:[[-2,4],[-1,1],[0,0],[1,1],[2,4]]}],n),t.plot(t("#sym1"),[{bars:{show:!0},data:[[-2,1],[-1,0],[0,0],[1,2],[2,0]]}],n),t.plot(t("#sym2"),[{bars:{show:!0},data:[[-2,0],[-1,0],[0,3],[1,0],[2,0]]}],n)})}($,colors,plot,mcmc,jStat);
