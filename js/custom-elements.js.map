{"version":3,"sources":["webpack:///./custom-elements/tree.wp.es.js","webpack:///./custom-elements/swap.wp.es.js","webpack:///./libs/geometry.wp.es.js","webpack:///./custom-elements/arg-map.wp.es.js","webpack:////nix/store/j9c3j3x6sc64mx4xp8jlbw8lhilijaf1-node-dependencies-ColEx-0.1.0/lib/node_modules/ascii-string-split/index.js","webpack:///./libs/shapes.wp.es.js","webpack:///./custom-elements/sidenote.wp.es.js","webpack:///./custom-elements/menu.wp.es.js"],"names":["S","Object","__WEBPACK_IMPORTED_MODULE_1_sanctuary__","checkTypes","env","handleEvent","event","resolve","reject","tag","from","removeClass","to","addClass","event_","pho","parent","height","stepDuration","stretch","Promise","then","heightFn","__WEBPACK_IMPORTED_MODULE_2_d3__","__WEBPACK_IMPORTED_MODULE_5_libs_util__","prog","css","fadeIn","cleanUp","removeAttr","fadeOut","all","choose","ev","el","__WEBPACK_IMPORTED_MODULE_0_jquery___default","target","map","contentTree","contentBranch","children","get","index","hasClass","is","siblings","__WEBPACK_IMPORTED_MODULE_4_custom_elements_sidenote__","setNotes","fixNotes","closest","attr","toArray","__WEBPACK_IMPORTED_MODULE_3_custom_elements_menu__","defaultHandlers","params","URLSearchParams","location","search","each","_","menu_","menu","id","data","label","menuItem","click","pageY","pageX","getMenu","HTMLElement","fixTarget","offset","top","left","off","MathJax","Hub","Queue","inlines","swap","arrow","this","p","selector","replace","bottom","nextAll","prevAll","topEl","bottomEl","betweenEls","nextUntil","bottomToTop","between","topToBottom","translations","angle","Math","PI","mkTranslator","trans","startAngle","center","radius","__WEBPACK_IMPORTED_MODULE_4_libs_geometry__","x","y","topTranslator","bottomTranslator","betweenTranslator","__WEBPACK_IMPORTED_MODULE_3_libs_util__","swapTranslate","swapDom","__WEBPACK_IMPORTED_MODULE_2_custom_elements_sidenote__","remove","decorate","bot","topNext","next","before","up","down","swaps","groupBy","on","equals","forEach","group","pipe","tail","prepend","clone","init","append","circleFromChord","startRads","stopRads","startCoord","stopCoord","coord1","coord2","hypot","distance","sin","abs","pointOnCircle","cos","__WEBPACK_IMPORTED_MODULE_3_sanctuary__","shapes","__WEBPACK_IMPORTED_MODULE_4_libs_shapes__","linkArc","link","source","dx","dy","dr","forceNodeProps","t","forceLinkProps","drawNode","nodeTypes","type","nodeTypeIndex","findIndex","Error","toString","mkArgMap","dataSrc","canvasSelector","__WEBPACK_IMPORTED_MODULE_1_d3__","fetchData","nodes","links","linkTypes","canvas","width","svg","simulation","force","d","strength","alphaDecay","mkSimulation","uniqueLinkTypes","defs","selectAll","enter","drawLibrary","classed","drawLinks","node","dblClicked","call","dragStarted","dragged","dragEnded","drawTSpans","RADIUS","drawNodes","ticked","mkLegend","alphaTarget","restart","fx","fy","select","legendNode","i","legendLink","fn","__WEBPACK_IMPORTED_MODULE_2_ascii_string_split___default","text","close","history","replaceState","window","pathname","stop","open","evt","e","currentTarget","filter","a","href","baseVal","maps","resize","slice","hide","show","addClickHandler","hash","endsWith","handleHash","asciiStringSplit","str","options","words","split","lines","line","normalizeOptions","word","length","splitWords","preservedWords","indexOf","push","substring","newOptions","Array","isArray","module","exports","__WEBPACK_IMPORTED_MODULE_0_sanctuary__","toSvgPolygon","angles","joinWith","triangle","square","diamond","pentagon","hexagon","circle","range","getReferrer","toMaybe","maybeToNullable","find","last","reduce","prevBot","_el","_1","maybe_","outerHeight","ref","max","prev","observer","observe","attributes","not","referrer","noted","html","addSidenote","MutationObserver","addOrRemoveNotes","parseFloat","document","fonts","ready","disconnect","__webpack_exports__","renderMenuItem","li","active","renderMenu","items","parseMenu","nodeName","parseMenuItem","menuDom","item","toggleMenu","some","tg","isPopup","__WEBPACK_IMPORTED_MODULE_2_libs_util__"],"mappings":"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","file":"custom-elements.js","sourcesContent":["// @flow\n/* eslint no-undef: \"off\" */\n\nimport $ from 'jquery'\nimport {create, env} from 'sanctuary'\nimport { interpolateNumber } from 'd3'\n\nimport menu from 'custom-elements/menu'\nimport sidenote from 'custom-elements/sidenote'\nimport { makeAnimationPromise, documentReadyPromise } from 'libs/util'\n\nconst S = create({checkTypes: false, env})\n\ntype Event\n  = { tag: 'INVISIBLEPARENT', from: JQuery, to: JQuery }\n  | { tag: 'SELECTEDOPEN' }\n  | { tag: 'SELECTEDNEWVISIBLE', from: JQuery, to: JQuery, parent: JQuery }\n\nconst handleEvent = (event: Event) => (resolve: Function, reject: Function) => {\n  switch (event.tag) {\n    case 'INVISIBLEPARENT':\n      event.from.removeClass('open')\n      event.to.addClass('open')\n      resolve()\n      break\n    case 'SELECTEDOPEN':\n      resolve()\n      break\n    case 'SELECTEDNEWVISIBLE':\n      // Flow behaving badly\n      const event_ = event\n      const pho = event_.parent.height()\n      const stepDuration = 300 // ms\n      const fadeOut = () =>\n        makeAnimationPromise(stepDuration, prog => event_.from.css('opacity', 1 - prog))\n          .then(() => {\n            event_.from.css('opacity', 0)\n            event_.from.removeClass('open')\n          })\n      const stretch = () =>\n        Promise.resolve()\n          .then(() => {\n            const heightFn = interpolateNumber(pho, event_.parent.height())\n            return makeAnimationPromise(stepDuration, prog => {\n              event_.parent.css('height', heightFn(prog))\n            })\n          })\n      const fadeIn = () =>\n        Promise.resolve()\n          .then(() => {\n            event_.to.css('opacity', 0)\n            event_.to.addClass('open')\n            return makeAnimationPromise(stepDuration, prog => {\n              event_.to.css('opacity', prog)\n            })\n          })\n      const cleanUp = () => {\n        event_.parent.removeAttr('style')\n        event_.from.removeAttr('style')\n        event_.to.removeAttr('style')\n      }\n      fadeOut()\n        .then(() => Promise.all([fadeIn(), stretch()]))\n        .then(cleanUp)\n        .then(resolve)\n      break\n  }\n}\n\nconst choose = (ev: JQueryMouseEventObject) => {\n  const el = $(ev.target)\n  S.map(\n    contentTree => {\n      const contentBranch = $($(contentTree).children().get(el.index()))\n      const event =\n        contentBranch.hasClass('open')\n          ? { tag: 'SELECTEDOPEN' }\n          : contentBranch.parent().is(':visible')\n            ? { tag: 'SELECTEDNEWVISIBLE', from: contentBranch.siblings('.open'), to: contentBranch, parent: contentBranch.parent() }\n            : { tag: 'INVISIBLEPARENT', from: contentBranch.siblings('.open'), to: contentBranch }\n      new Promise(handleEvent(event)).then(() => {\n        sidenote.setNotes()\n        sidenote.fixNotes()\n      })\n    }\n  )(\n    $(`[data-menu=\"${el.closest('menu').attr('id')}\"]`).toArray()\n  )\n  menu.defaultHandlers(el)\n  return false\n}\n\nconst fixTarget = (target: EventTarget) => HTMLElement = (target: any) // eslint-disable-line no-return-assign\n\ndocumentReadyPromise.then(() => {\n  const params = new URLSearchParams(location.search)\n  $('[type=\"menu\"]').each((_, menu_) => {\n    const menu = $(menu_)\n    const id = menu.data('menu')\n    const label = params.get(id)\n    if (label != null) {\n      const menuItem = $('#' + id).children(`[label=\"${label}\"]`)\n      const from = menu.children('.open')\n      const to = $(menu.children().get(menuItem.index()))\n      new Promise(handleEvent({ tag: 'INVISIBLEPARENT', from, to })).then(() => {\n        sidenote.setNotes()\n        sidenote.fixNotes()\n      })\n    }\n  })\n\n  S.map(el =>\n    $(el).click(({pageY, pageX, target}) => {\n      menu.getMenu(fixTarget(target))\n      .offset({top: pageY, left: pageX})\n      .children('ul.menu').children()\n      .off().click(choose)\n      return false\n    })\n  )(\n    $('[type=\"menu\"]').toArray()\n  )\n\n  MathJax.Hub.Queue(() => {\n    // Messes up rendering if we add to stylesheet\n    $('.MathJax_MathContainer').css('display', 'inline')\n    $('.MathJax_MathContainer > span').css('display', 'inline')\n    // Re-inline fix rendering problem\n    const inlines = $('.switch.inline > li.open')\n    inlines.css('display', 'inline-block')\n    inlines.offset() // Trigger reflow\n    inlines.css('display', 'inline')\n    inlines.removeAttr('style')\n  })\n})\n\n\n\n// WEBPACK FOOTER //\n// ./custom-elements/tree.wp.es.js","// @flow\n/* eslint no-undef: \"off\" */\n\n// Doesn't currently handle nested swaps\n\nimport $ from 'jquery'\nimport {create, env} from 'sanctuary'\n\nimport sidenote from 'custom-elements/sidenote'\nimport { makeAnimationPromise } from 'libs/util'\nimport { circleFromChord, pointOnCircle } from 'libs/geometry'\n\nconst S = create({checkTypes: false, env})\n\nconst translations = (top: JQuery, bottom: JQuery) => {\n  const bottomToTop = top.offset().top - bottom.offset().top\n  const between = bottom.height() - top.height()\n  const topToBottom = bottom.offset().top - top.offset().top + between\n  return {bottomToTop, between, topToBottom}\n}\n\nconst swapTranslate = (topEl: JQuery, bottomEl: JQuery) => (resolve: Function, reject: Function) => {\n  const betweenEls = topEl.nextUntil(bottomEl)\n  const {bottomToTop, between, topToBottom} = translations(topEl, bottomEl)\n\n  const angle = Math.PI / 4\n  const mkTranslator = (trans: number): (number => string) => {\n    const startAngle = trans <= 0 ? Math.PI + angle : angle\n    const {center, radius} = circleFromChord(startAngle,\n                                             startAngle - 2 * angle,\n                                             {x: 0, y: 0},\n                                             {x: 0, y: trans})\n    return (prog: number): string => {\n      const {x, y} = pointOnCircle(center, radius,\n                                   startAngle - angle * 2 * prog)\n      return `translate(${x}px, ${-y}px)`\n    }\n  }\n  const topTranslator = mkTranslator(topToBottom)\n  const bottomTranslator = mkTranslator(bottomToTop)\n  const betweenTranslator = mkTranslator(between)\n\n  const stepDuration = 300 // ms\n\n  Promise.all([\n    makeAnimationPromise(\n      stepDuration,\n      prog => topEl.css('transform', topTranslator(prog))\n    ).then(() => topEl.removeAttr('style')),\n    makeAnimationPromise(\n      stepDuration,\n      prog => bottomEl.css('transform', bottomTranslator(prog))\n    ).then(() => bottomEl.removeAttr('style')),\n    makeAnimationPromise(\n      stepDuration,\n      prog => betweenEls.css('transform', betweenTranslator(prog))\n    ).then(() => betweenEls.removeAttr('style'))\n  ]).then(resolve)\n}\n\nconst swap = function () {\n  const arrow = $(this)\n  const p = arrow.parent()\n  const selector = '.' + p.attr('class').replace(' ', '.')\n  const [top, bottom] =\n    (arrow.attr('class') === 'swap-down')\n    ? [p, p.nextAll(selector + ':first')]\n    : [p.prevAll(selector + ':first'), p]\n  new Promise(swapTranslate(top, bottom)).then(() => {\n    swapDom(top, bottom)\n    sidenote.fixNotes()\n    $('.swap-up, .swap-down').remove()\n    decorate()\n  })\n}\n\nconst swapDom = (top: JQuery, bot: JQuery) => {\n  const topNext = top.next()\n  if (topNext[0] === bot[0]) {\n    bot.before(top)\n    top.before(bot)\n  } else {\n    bot.before(top)\n    topNext.before(bot)\n  }\n}\n\nconst decorate = () => {\n  const up = $('<span class=\"swap-up\"></span>')\n  const down = $('<span class=\"swap-down\"></span>')\n  const swaps = $('.swap')\n  const swapGroups = S.groupBy(S.on(S.equals)(el => $(el).attr('class')))(swaps.toArray())\n  const decorateGroup = group => {\n    S.pipe([S.tail, S.map(S.map(el => $(el).prepend(up.clone())))])(group)\n    S.pipe([S.init, S.map(S.map(el => $(el).append(down.clone())))])(group)\n  }\n  swapGroups.forEach(decorateGroup)\n  $('.swap-up, .swap-down').click(swap)\n}\n\n$(decorate)\n\n\n\n// WEBPACK FOOTER //\n// ./custom-elements/swap.wp.es.js","// @flow\n/* eslint no-undef: \"off\" */\n\nexport type Coordinate = {x: number, y: number}\n\nconst distance = (coord1: Coordinate, coord2: Coordinate): number =>\n  Math.hypot(coord1.x - coord2.x, coord1.y - coord2.y)\n\nconst circleFromChord = (startRads: number, stopRads: number, startCoord: Coordinate, stopCoord: Coordinate): {radius: number, center: Coordinate} => {\n  const radius = distance(startCoord, stopCoord) /\n    Math.sin(Math.abs(stopRads - startRads) / 2) / 2\n  const center = pointOnCircle(startCoord, radius, startRads + Math.PI)\n  return {radius, center}\n}\n\nconst pointOnCircle = ({x, y}: Coordinate, radius: number, angle: number): Coordinate => ({\n  x: x + Math.cos(angle) * radius,\n  y: y + Math.sin(angle) * radius\n})\n\nexport { distance, circleFromChord, pointOnCircle }\n\n\n\n// WEBPACK FOOTER //\n// ./libs/geometry.wp.es.js","// @flow\n/* eslint no-undef: \"off\" */\n\nimport $ from 'jquery'\nimport * as d3 from 'd3'\nimport asciiStringSplit from 'ascii-string-split'\nimport { create, env } from 'sanctuary'\n\nimport * as shapesImport from 'libs/shapes'\nimport { uniquify, documentReadyPromise } from 'libs/util'\nconst S = create({checkTypes: false, env})\n\nconst RADIUS = 13\nconst STRENGTH = 1\nconst LABEL_LENGTH = 20\n\nconst shapes = [\n  shapesImport.toSvgPolygon(shapesImport.square),\n  shapesImport.toSvgPolygon(shapesImport.circle),\n  shapesImport.toSvgPolygon(shapesImport.diamond),\n  shapesImport.toSvgPolygon(shapesImport.hexagon),\n  shapesImport.toSvgPolygon(shapesImport.pentagon),\n  shapesImport.toSvgPolygon(shapesImport.triangle)\n]\n\nconst linkArc = (link: ForceLink) => {\n  const { target, source } = link\n  const dx = target.x - source.x\n  const dy = target.y - source.y\n  const dr = Math.hypot(dx, dy)\n  return `M${source.x},${source.y}A${dr},${dr} 0 0,1 ${target.x},${target.y}`\n}\n\nconst fetchData = <NTy: string, LTy: string>(dataSrc: string): Promise<[Array<Node<NTy>>, Array<Link<LTy>>, Array<NodeType<NTy>>, Array<LinkType<LTy>>]> =>\n  Promise.all([\n    d3.csv(dataSrc + '/nodes.csv'),\n    d3.csv(dataSrc + '/links.csv'),\n    d3.csv(dataSrc + '/node-types.csv'),\n    d3.csv(dataSrc + '/link-types.csv')\n  ])\n\n// Hacky way of telling Flow about d3's property additions\nconst forceNodeProps = <T>(t: T): (T & ForceNode) => (t: any)\nconst forceLinkProps = <T>(t: T): (T & ForceLink) => (t: any)\n\nconst ticked = <A: ForceLink, B: ForceNode>(link: SelectWithData<A>, node: SelectWithData<B>) => () => {\n  link.attr('d', linkArc)\n  node.attr('transform', d => `translate(${d.x}, ${d.y})`)\n}\n\nconst mkSimulation = ({ width, height }) =>\n  d3.forceSimulation()\n  .force('link', d3.forceLink().id(d => d.id).strength(STRENGTH).distance(width / 5))\n  .force('charge', d3.forceManyBody().strength(-250))\n  .force('center', d3.forceCenter(width / 2, height / 2))\n  .alphaDecay(0.015)\n\nconst drawLibrary = <Ty: string>(id: string, svg: SelectWithoutData, linkTypes: Array<LinkType<Ty>>) => {\n  const uniqueLinkTypes = uniquify(linkTypes.map(d => d.type))\n  // Per-type markers, as they don't inherit styles.\n  const defs = svg.append('defs')\n  defs.append('g').selectAll('marker')\n    .data(uniqueLinkTypes)\n    .enter().append('marker')\n      .attr('id', d => `${id}-marker-${d}`)\n      .attr('viewBox', '0 -5 10 10')\n      .attr('refX', 15)\n      .attr('refY', -1.5)\n      .attr('markerWidth', 6)\n      .attr('markerHeight', 6)\n      .attr('orient', 'auto')\n    .append('path')\n      .attr('d', 'M0,-5L10,0L0,5')\n  defs.append('g').selectAll('linearGradient')\n    .data(uniqueLinkTypes)\n    .enter().append('linearGradient')\n      .attr('id', d => `${id}-gradient-${d}`)\n    .append('stop')\n}\n\nconst drawNode = <Ty: string>(nodeTypes: Array<NodeType<Ty>>): (Ty => string) => {\n  return type => {\n    const nodeTypeIndex = nodeTypes.findIndex(t => t.type === type)\n    if (nodeTypeIndex == null) {\n      throw Error(`Couldn't find node type ${type} in ${nodeTypes.toString()}`)\n    }\n    return shapes[nodeTypeIndex](RADIUS)\n  }\n}\n\nconst drawLinks = <Ty: string>(id: string, svg: SelectWithoutData, links: Array<Link<Ty>>): SelectWithData<Link<Ty> & ForceLink> =>\n  svg.append('g')\n    .attr('class', 'links')\n  .selectAll('path')\n  .data(S.map(forceLinkProps)(links))\n  .enter().append('path')\n    .attr('class', d => d.type)\n    .classed('link', true)\n    .attr('marker-end', d => `url(#${id}-marker-${d.type})`)\n    .attr('stroke', d => `url(#${id}-gradient-${d.type})`)\n\nconst drawNodes = (svg: SelectWithoutData, nodes: Array<Node<*>>, nodeTypes: Array<NodeType<*>>, simulation: Simulation<Node<*>, Link<*>>): SelectWithData<Node<*> & ForceNode> => {\n  const node =\n    svg.append('g')\n        .classed('nodes', true)\n      .selectAll('g.node')\n      .data(S.map(forceNodeProps)(nodes))\n      .enter().append('g')\n        .classed('node', true)\n        .on('dblclick', dblClicked)\n        .call(d3.drag()\n          .on('start', dragStarted(simulation))\n          .on('drag', dragged)\n          .on('end', dragEnded(simulation)))\n\n  node.append('polygon')\n    .attr('class', d => d.type)\n    .attr('points', d => drawNode(nodeTypes)(d.type))\n\n  drawTSpans(d => d.label, RADIUS + 5)(node.append('a').attr('xlink:href', d => '#' + d.id).append('text'))\n  return node\n}\n\nconst mkArgMap = (id: string, dataSrc: string, canvasSelector: string): Promise<Simulation<Node<*>, Link<*>>> => {\n  return fetchData(dataSrc).then(([nodes, links, nodeTypes, linkTypes]) => {\n    const canvas = { width: $(canvasSelector).width(), height: $(canvasSelector).height() }\n    const svg = d3.select(canvasSelector).append('svg')\n        .attr('id', id)\n        .attr('width', canvas.width)\n        .attr('height', canvas.height)\n\n    const simulation = mkSimulation(canvas)\n    drawLibrary(id, svg, linkTypes)\n    const link = drawLinks(id, svg, links)\n    const node = drawNodes(svg, nodes, nodeTypes, simulation)\n\n    simulation\n      .nodes(nodes)\n      .on('tick', ticked(link, node))\n\n    simulation.force('link')\n      .links(links)\n\n    mkLegend(id, svg, nodeTypes, linkTypes)\n\n    return simulation\n  })\n}\n\nconst dragStarted = simulation => d => {\n  simulation.alphaTarget(0.3).restart()\n  d.fx = d.x\n  d.fy = d.y\n}\n\nconst dragged = d => {\n  d.fx = d3.event.x\n  d.fy = d3.event.y\n}\n\nconst dblClicked = function (d) {\n  d3.select(this).select('polygon').classed('fixed', false)\n  d.fx = null\n  d.fy = null\n}\n\nconst dragEnded = function (simulation) {\n  return function () {\n    d3.select(this).select('polygon').classed('fixed', true)\n    simulation.alphaTarget(0)\n  }\n}\n\ntype Shape = 'circle' | 'triangle' | 'diamond' | 'square' | 'pentagon' | 'hexagon'\ntype Node<Ty: string> = { label: string, type: Ty, id: string }\ntype NodeType<Ty: string> = { type: Ty, label: string, shape: Shape }\ntype Link<Ty: string> = { source: string, target: string, type: Ty }\ntype LinkType<Ty: string> = { type: Ty, label: string }\n\nconst mkLegend = <NTy: string, LTy: string>(id: string, svg: SelectWithoutData, nodeTypes: Array<NodeType<NTy>>, linkTypes: Array<LinkType<LTy>>) => {\n  const legendNode = svg.append('g')\n    .attr('transform', 'translate(80, 50)')\n    .selectAll('.legend')\n    .data(nodeTypes)\n    .enter().append('g')\n      .classed('legend', true)\n      .attr('transform', (_, i: number) => 'translate(0, ' + i * 30 + ')')\n\n  legendNode.append('polygon')\n      .attr('points', d => drawNode(nodeTypes)(d.type))\n\n  drawTSpans(d => d.label, RADIUS + 5)(legendNode.append('text'))\n\n  const legendLink = svg.append('g')\n    .attr('transform', 'translate(80, 180)')\n    .selectAll('.legend')\n    .data(S.map(forceLinkProps)(linkTypes))\n    .enter().append('g')\n      .classed('legend', true)\n      .attr('transform', (_, i: number) => 'translate(0, ' + i * 30 + ')')\n\n  legendLink.append('path')\n      .attr('d', linkArc({source: {x: -RADIUS, y: RADIUS}, target: {x: RADIUS, y: -RADIUS}}))\n      .attr('class', d => d.type)\n      .attr('stroke', d => `url(#${id}-gradient-${d.type}`)\n      .classed('link', true)\n\n  drawTSpans(d => d.label, RADIUS + 5)(legendLink.append('text'))\n}\n\nconst drawTSpans = <T>(fn: T => string, x: number): (SelectWithData<T> => any) => {\n  return el =>\n    el.selectAll('tspan')\n      .data(d => asciiStringSplit(fn(d), LABEL_LENGTH))\n      .enter().append('tspan')\n        .attr('y', (_, i: number) => 0.5 + 1.6 * i + 'ex')\n        .attr('x', x)\n        .text(d => d)\n}\n\nconst close = (map: Simulation<Node<*>, Link<*>>) => () => {\n  $('#arg-map a').removeAttr('style')\n  $('#underlay').removeClass('inactive')\n  $('#overlay').addClass('inactive')\n  history.replaceState(null, '', window.location.pathname)\n  map.stop()\n}\n\nconst open = (map: Simulation<Node<*>, Link<*>>) => (evt: ?JQueryMouseEventObject) => {\n  $('#underlay').addClass('inactive')\n  $('#overlay').removeClass('inactive')\n  $('#arg-map a').click(close(map))\n  $('#arg-map > svg, #overlay').click(function (e) {\n    if (e.target === this) { close(map)() }\n  })\n  if (evt != null) {\n    const id = $(evt.currentTarget).attr('id')\n    if (id != null) {\n      $('.node > a').removeClass('entry-point')\n      $('.node > a').filter((_, a) =>\n        // $FlowFixMe Doesn't know about SVG anchors\n        a.href.baseVal === '#' + id\n      ).addClass('entry-point')\n    }\n  }\n}\n\nconst maps: { [string]: Simulation<Node<*>, Link<*>> } = {}\n\nconst addClickHandler = () => $('a.arg-map').click(evt => {\n  const id = $(evt.currentTarget).attr('href').slice(1)\n  // This probably doesn't scale beautifully put I doubt it's a problem in practice ATM\n  $('#overlay svg').hide()\n  if (maps[id] == null) {\n    mkArgMap(id, $(`a[href=\"#${id}\"][data-data-src]`).data('data-src'), '#overlay #arg-map').then(map => {\n      maps[id] = map\n      open(map)(evt)\n    })\n  } else {\n    $('#' + id).show()\n    open(maps[id])(evt)\n    maps[id].restart()\n  }\n})\n\nconst addResizeHandler = () => {\n  $(window).resize(() => {\n    $('#arg-map svg').width($('#arg-map').width())\n    $('#arg-map svg').height($('#arg-map').height())\n  })\n}\n\nconst handleHash = () => {\n  if (location.hash.endsWith('-map')) {\n    const id = location.hash.slice(1)\n    mkArgMap(id, $(`a[href=\"#${id}\"]`).data('data-src'), '#overlay #arg-map').then(map => {\n      maps[id] = map\n      open(map)()\n    })\n  }\n}\n\ndocumentReadyPromise.then(() => {\n  addResizeHandler()\n  addClickHandler()\n  handleHash()\n})\n\n\n\n// WEBPACK FOOTER //\n// ./custom-elements/arg-map.wp.es.js","// --------------------------------------------------------------------------------\n// ASCII String Split Library\n// --------------------------------------------------------------------------------\n\nmodule.exports = exports = asciiStringSplit;\nasciiStringSplit.normalizeOptions = normalizeOptions;\n    \nfunction asciiStringSplit(str, width, options) {\n    var words = str.split(/\\s/);\n    var lines = [];\n    var line = '';\n    options = normalizeOptions(options);\n    \n    if (width < 2) {\n        throw new Error('width must be at least 2 characters');\n    }\n    \n    words.forEach(function(word) {\n        var offset;\n        \n        // ---------------------------------------------------------\n        // STEP 1: add words to the lines\n        // ---------------------------------------------------------\n        \n        // CASE 1: starting a new line\n        if (!line.length) {\n            line = word;\n        }\n            \n        // CASE 2: appending a word that fits on the current line\n        else if ( line.length + 1 + word.length  <= width ) {\n            line += ' ' + word;\n        }\n        \n        // CASE 3: word doesn't fit on the current line, and it is not allowed to be split\n        else if (!options.splitWords || !!~options.preservedWords.indexOf(word)) {\n            line.length && lines.push(line);\n            line = word;\n        }\n            \n        // CASE 4: append a big word that will be split across lines\n        // - line has at least 5 spaces left, which is room for: 1 space, 3 chars and a hyphen\n        // - word is at least 6 letters long\n        // - resulting split ensures at least 3 characters on both lines\n        else if ( line.length + 5 <= width && word.length > 5) {\n            // fill the rest of the line, leaving room for a trailing '-'\n            offset = width - line.length - 2; \n            // edge case: ensure there are at least 3 chars after the split\n            offset = offset > word.length - 3 ? word.length - 3 : offset;\n\n            line += ' ' + word.substring(0, offset) + '-';\n            lines.push(line);\n            line = word.substring(offset);\n        }\n            \n        // CASE 5: word doesn't fit on the line, so start a new line\n        else {\n            lines.push(line);\n            line = word;\n        }\n\n        // ---------------------------------------------------------\n        // STEP 2: wrap overflowed lines onto additional lines\n        // ---------------------------------------------------------\n\n        // only if splitWords is true and current word is not in preservedWords\n        if (options.splitWords && !~options.preservedWords.indexOf(word)) {\n            while (line.length > width) {\n                lines.push(line.substring(0, width-1) + '-');\n                line = line.substring(width-1);\n            }\n        }\n        \n    });\n    \n    lines.push(line);\n    \n    return lines;\n}\n\nfunction normalizeOptions(options) {\n    var newOptions = {\n        splitWords: true,\n        preservedWords: []\n    };\n\n    if (!(typeof options === 'object' || typeof options === 'undefined')) {\n        throw new Error('options must be an object');\n    }\n    options = options || {};\n    \n    if ('splitWords' in options) {\n        newOptions.splitWords = !!options.splitWords;\n    }\n    \n    if ('preservedWords' in options) {\n        if (!Array.isArray(options.preservedWords)) {\n            throw new Error('options.preservedWords must be an array');\n        }\n\n        options.preservedWords.forEach(function(str) {\n            if (typeof str !== 'string') {\n                throw new Error('options.preservedWords entries must be strings');\n            }\n            newOptions.preservedWords.push(str);\n        });\n    } \n    \n    return newOptions;\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// /nix/store/j9c3j3x6sc64mx4xp8jlbw8lhilijaf1-node-dependencies-ColEx-0.1.0/lib/node_modules/ascii-string-split/index.js\n// module id = 1180\n// module chunks = 1","// @flow\n\nimport {create, env} from 'sanctuary'\n\nconst S = create({checkTypes: false, env})\n\nconst toSvgPolygon =\n  (angles: Array<number>) =>\n  (RADIUS: number): string =>\n  S.pipe([\n    S.map(angle => Math.cos(angle) * RADIUS + ' ' + Math.sin(angle) * RADIUS),\n    S.joinWith(', ')\n  ])(\n    angles\n  )\n\nconst triangle = [\n  3 / 6 * Math.PI,\n  7 / 6 * Math.PI,\n  11 / 6 * Math.PI\n]\nconst square = [\n  1 / 4 * Math.PI,\n  3 / 4 * Math.PI,\n  5 / 4 * Math.PI,\n  7 / 4 * Math.PI\n]\nconst diamond = [\n  0 / 2 * Math.PI,\n  1 / 2 * Math.PI,\n  2 / 2 * Math.PI,\n  3 / 2 * Math.PI\n]\nconst pentagon = [\n  3 / 10 * Math.PI,\n  7 / 10 * Math.PI,\n  11 / 10 * Math.PI,\n  15 / 10 * Math.PI,\n  19 / 10 * Math.PI\n]\nconst hexagon = [\n  1 / 6 * Math.PI,\n  3 / 6 * Math.PI,\n  5 / 6 * Math.PI,\n  7 / 6 * Math.PI,\n  9 / 6 * Math.PI,\n  11 / 6 * Math.PI\n]\nconst circle = S.map(i => 2 * Math.PI / 16 * i)(S.range(0, 16))\n\nexport { toSvgPolygon, triangle, square, diamond, pentagon, hexagon, circle }\n\n\n\n// WEBPACK FOOTER //\n// ./libs/shapes.wp.es.js","// @flow\n/* eslint no-undef: \"off\" */\n\nimport $ from 'jquery'\nimport {create, env} from 'sanctuary'\nconst S = create({checkTypes: false, env})\n\nconst getReferrer = (el: JQuery): ?JQuery =>\n  S.pipe([\n    S.toMaybe,\n    S.map(id => $('#' + id.slice(1))),\n    S.maybeToNullable\n  ])(\n    el.find('a').last().attr('href')\n  )\n\nconst fixNotes = () => {\n  S.reduce(\n    prevBot => _el => {\n      const el = $(_el)\n      el.offset((_1, {top, left}) =>\n        S.pipe([\n          S.toMaybe,\n          S.maybe_(() => {\n            prevBot = top + el.outerHeight(true)\n            return {top, left}\n          })(\n            ref => {\n              const top = S.max(ref.prev().offset().top)(prevBot)\n              prevBot = top + el.outerHeight(true)\n              return {top, left}\n            }\n          )\n        ])(\n          getReferrer(el)\n        )\n      )\n      return prevBot\n    })(\n    0)(\n    $('.sidenote').toArray())\n}\n\nconst setNotes = () => {\n  const addSidenote = el => {\n    // Putting block elements in a <p> auto-closes it so we put it immediately outside\n    const referrer = getReferrer(el)\n    if (referrer != null) {\n      const noted = referrer.prev()\n      if (noted.is(':visible')) {\n        const p = noted.closest('p');\n        (p.length === 0 ? noted : p).before('<aside class=\"sidenote\">' + $(el).html() + '</aside>')\n      }\n    }\n  }\n  const delink = () => {\n    $('.noted').next().hide()\n    $('.sidenote').each((_, el) => {\n      $(el).find('a').last().hide()\n    })\n  }\n\n  $('.footnotes').hide()\n  $('details').each((_, el) => {\n    observer.observe(el, {attributes: true})\n  })\n  $('.sidenote').not('#warnings').remove()\n  $('.footnotes > ol > li').each((_, el) => {\n    addSidenote($(el))\n  })\n  delink()\n}\n\nconst observer = new MutationObserver(fixNotes)\n\nconst removeNotes = () => {\n  observer.disconnect()\n  $('.sidenote').not('#warnings').remove()\n  $('.noted').next().show()\n  $('.footnotes').show()\n}\n\nconst addOrRemoveNotes = () => {\n  const emWidth = $(window).width() / parseFloat($('html').css('font-size'))\n  if (emWidth > 60) {\n    setNotes()\n    // $FlowFixMe\n    document.fonts.ready.then(fixNotes)\n    MathJax.Hub.Queue(() => {\n      fixNotes()\n    })\n  } else {\n    removeNotes()\n  }\n}\n\n$(() => {\n  addOrRemoveNotes()\n  $(window).resize(addOrRemoveNotes)\n})\n\nexport default {setNotes, fixNotes}\n\n\n\n// WEBPACK FOOTER //\n// ./custom-elements/sidenote.wp.es.js","// @flow\n/* eslint no-undef: \"off\" */\n\nimport $ from 'jquery'\nimport {create, env} from 'sanctuary'\n\nimport { documentReadyPromise } from 'libs/util'\n\nconst S = create({checkTypes: false, env})\n\nconst defaultHandlers = (el: JQuery) => {\n  if (el.attr('type') === 'radio') {\n    const menu = el.closest('menu')\n    const item = menu.find(`[label=\"${el.text()}\"]`)\n    handleEvent({ tag: 'ITEMSELECT', menu, item })\n  }\n}\n\nconst getMenu = (el: HTMLElement) => $('#' + $(el).closest('[type=\"menu\"]').attr('data-menu'))\n\nconst renderMenuItem = (menuItem: MenuItem): JQuery => {\n  switch (menuItem.tag) {\n    case 'HR':\n      return $('<hr/>')\n    case 'MENUITEM':\n      const li = $('<li/>').text(menuItem.label).attr('type', menuItem.type)\n      if (menuItem.active) {\n        li.attr('checked', 'checked')\n      } else {\n        li.removeAttr('checked')\n      }\n      return li\n    default:\n      throw Error(menuItem.toString())\n  }\n}\n\nconst renderMenu = (menu: Menu): ?JQuery => {\n  switch (menu.tag) {\n    case 'CLOSED':\n      return null\n    case 'OPEN':\n      return $('<ul class=\"menu\"></ul>').append(S.map(renderMenuItem)(menu.items))\n  }\n}\n\ntype MenuItemType = 'radio' | string\n\ntype MenuItem\n  = { tag: 'HR' }\n  | { tag: 'MENUITEM', label: string, type: MenuItemType, active: boolean }\n\ntype Menu\n  = { tag: 'OPEN', items: Array<MenuItem> }\n  | { tag: 'CLOSED' }\n\n// The JQuery declaration seems to be wrong\nconst fixTarget = (target: EventTarget) => HTMLElement = (target: any) // eslint-disable-line no-return-assign\n\nconst parseMenuItem = (menuItem: JQuery): MenuItem => {\n  switch (menuItem.get(0).nodeName) {\n    case 'HR':\n      return { tag: 'HR' }\n    case 'MENUITEM':\n      return { tag: 'MENUITEM',\n        label: menuItem.attr('label'),\n        type: menuItem.attr('type'),\n        active: menuItem.attr('checked') === 'checked'\n      }\n    default:\n      throw Error(menuItem.toString())\n  }\n}\n\nconst parseMenu = (menu: JQuery): Menu =>\n  menu.data('active')\n  ? { tag: 'CLOSED' }\n  : { tag: 'OPEN',\n    items: S.map((el) => parseMenuItem($(el)))(menu.children('menuitem, hr').toArray())\n  }\n\ntype Event\n  = { tag: 'MENUCLICK', menu: JQuery }\n  | { tag: 'ITEMSELECT', item: JQuery, menu: JQuery }\n\nconst handleEvent = (event: Event) => {\n  switch (event.tag) {\n    case 'MENUCLICK':\n      S.pipe([\n        parseMenu,\n        renderMenu,\n        S.toMaybe,\n        S.maybe_(\n          () => {\n            $('ul.menu').remove()\n            event.menu.data('active', false)\n          })(\n          menuDom => {\n            event.menu.append(menuDom)\n            event.menu.data('active', true)\n          }\n        )\n      ])(\n        event.menu\n      )\n      break\n    case 'ITEMSELECT':\n      $('ul.menu').remove()\n      event.menu.data('active', false)\n      S.map(el => $(el).removeAttr('checked'))(event.menu.children().toArray())\n      event.item.attr('checked', 'checked')\n      break\n  }\n}\n\nconst toggleMenu = (ev: JQueryMouseEventObject) => {\n  // Menu shouldn't popup when clicking on interactive element\n  const isInter = [\n    'TEXTAREA',\n    'BUTTON',\n    'INPUT',\n    'OPTION',\n    'SELECT',\n    'DETAILS',\n    'SUMMARY',\n    'A'\n  ].some(tg => fixTarget(ev.target).nodeName === tg)\n  if (isInter) { return }\n  const isPopup = el =>\n    $(el).get(0).nodeName === 'MENU' && $(el).attr('type') === 'popup'\n  const menu = getMenu(fixTarget(ev.target)).filter((_, el) => isPopup(el))\n  if (menu != null) {\n    handleEvent({ tag: 'MENUCLICK', menu: $(menu) })\n  }\n}\n\ndocumentReadyPromise.then(() => {\n  const params = new URLSearchParams(location.search)\n  $('menu').each((_, menu_) => {\n    const menu = $(menu_)\n    const label = params.get(menu.attr('id'))\n    if (label != null) {\n      const item = menu.find(`[label=\"${label}\"]`)\n      handleEvent({ tag: 'ITEMSELECT', menu, item })\n    }\n  })\n\n  $('[type=\"menu\"]').each((_, el) => {\n    $(el).click(toggleMenu)\n  })\n})\n\nexport default { getMenu, defaultHandlers }\n\n\n\n// WEBPACK FOOTER //\n// ./custom-elements/menu.wp.es.js"],"sourceRoot":""}